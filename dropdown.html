<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>StuCo - Login</title>
        <link rel="stylesheet" href="dropdown.css">
        <script type = "text/javascript" src ="classes.js"></script>
        <script src = "questionAnswer.js"></script>
        

    </head>
    <body>
        <label for="departments">Choose a department:</label>
        <input list="departList" placeholder= "Choose a department..." oninput="onInput()" id="department" name="departments" />
        <datalist id="departList">
        </datalist>
        <input list = "classList" placeholder="Choose a class number..." oninput = "search()" id = "course" name = "courses" />
        <datalist id = classList> 
        </datalist>
        <input type = "text" placeholder="Ask your own question..." class = "post" onkeydown="post(this)" />
    </body>
    <script>
        let dept = "";
        let num = "" ;
        let result = "";
        let questions = [];
        console.log(classes);
        document.cookie = username = "Harper";
        for(let course in classes){
            opti = document.createElement("option");
            opti.setAttribute("value", course);
            document.getElementById("departList").appendChild(opti);
        }

        function onInput() {
            console.log("onInput");
            console.log(document.getElementById("departList"));
            while(document.getElementById("classList").hasChildNodes()){
                document.getElementById("classList").removeChild(document.getElementById("classList").firstChild);
            }
            
            var val = document.getElementById("department").value;
            dept = val;
            for(let number in classes[val]){
                    opti = document.createElement("option");
                    opti.setAttribute("value", classes[val][number]);
                    document.getElementById("classList").appendChild(opti);

            }
        }
        function search(){
            num = document.getElementById("course").value; 
            result = dept + num;
            console.log(result);

            questions = ["a","b","c"]; //getClass(result)
            updateQuestions();
        }
        
        function updateQuestions(){
            //for(child in document.)
            //document.body.removeChild(document.body.btn);

            let elements = [];
            for(let ID in questions){
                elements.push(questions[ID]); //(getQuestion(ID)) 
            }

            for (let e in document.getElementsByClassName("question"))
            {

            }

            for(let e in elements){
                let btn = document.createElement("button");
                btn.setAttribute("class", "question");
                btn.innerHTML = elements[e];
                btn.onclick = function (){
                    document.cookie = "question = " + elements[e];
                    console.log(document.cookie);
                    window.location.href= '/questions.html';
                }
                document.body.appendChild(btn);
            }
        }

        function post(ele){
            if(event.key === 'Enter'){
                questions.push(ele.value);
                console.log(questions);
                updateQuestions();
                //postQuestion(result,ele.value) 
            }
        }
    </script>
</html> 
